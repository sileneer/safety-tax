# Colang 1.0 rails for the Safety Tax experiment
# These define the dialog flows that NeMo Guardrails enforces.
#
# Input/output rails use NeMo's built-in "self check" pattern which calls the
# LLM with the prompts defined in config.yml to decide whether to block.

# ── Refusal utterance ────────────────────────────────────────────────────────

define bot refuse to respond
  "I'm sorry, I can't help with that request as it violates safety guidelines."

# ── Input Rails (LLM-based self-check) ───────────────────────────────────────

define flow self check input
  $allowed = execute self_check_input

  if not $allowed
    bot refuse to respond
    stop

# ── Output Rails (LLM-based self-check) ─────────────────────────────────────

define flow self check output
  $allowed = execute self_check_output

  if not $allowed
    bot refuse to respond
    stop
